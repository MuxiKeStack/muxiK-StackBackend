basePath: /api/v1
definitions:
  comment.commentListResponse:
    properties:
      page:
        type: integer
      parent_comment_list:
        items:
          $ref: '#/definitions/model.ParentCommentInfo'
        type: array
      parent_comment_sum:
        type: integer
    type: object
  comment.likeDataRequest:
    properties:
      like_state:
        type: boolean
    type: object
  comment.likeDataResponse:
    properties:
      like_num:
        type: integer
      like_state:
        type: boolean
    type: object
  comment.newCommentRequest:
    properties:
      content:
        type: string
      is_anonymous:
        type: boolean
    required:
    - content
    type: object
  evaluation.evaluationPublishRequest:
    properties:
      attendance_check_type:
        description: 经常点名/偶尔点名/签到点名，标识为 1/2/3
        type: integer
      content:
        type: string
      course_id:
        type: string
      course_name:
        type: string
      exam_check_type:
        description: 无考核/闭卷考试/开卷考试/论文考核，标识为 1/2/3/4
        type: integer
      is_anonymous:
        type: boolean
      rate:
        type: number
      tags:
        items:
          type: integer
        type: array
    required:
    - course_id
    - course_name
    type: object
  evaluation.evaluationPublishResponse:
    properties:
      evaluation_id:
        type: integer
    type: object
  evaluation.evaluationsOfCourseResponse:
    properties:
      hot_list:
        items:
          $ref: '#/definitions/model.EvaluationInfo'
        type: array
      hot_sum:
        type: integer
      normal_list:
        items:
          $ref: '#/definitions/model.EvaluationInfo'
        type: array
      normal_sum:
        type: integer
    type: object
  evaluation.historyEvaluationsResponse:
    properties:
      list:
        items:
          $ref: '#/definitions/model.EvaluationInfo'
        type: array
      sum:
        type: integer
    type: object
  evaluation.likeDataRequest:
    properties:
      like_state:
        type: boolean
    type: object
  evaluation.likeDataResponse:
    properties:
      like_num:
        type: integer
      like_state:
        type: boolean
    type: object
  evaluation.playgroundResponse:
    properties:
      list:
        items:
          $ref: '#/definitions/model.EvaluationInfo'
        type: array
      sum:
        type: integer
    type: object
  message.messageListResponse:
    properties:
      messageList:
        items:
          $ref: '#/definitions/model.MessageSub'
        type: array
    type: object
  model.AuthResponse:
    properties:
      is_new:
        type: integer
      token:
        type: string
    type: object
  model.ClassInfo:
    properties:
      class_id:
        type: string
      class_name:
        type: string
      course_id:
        type: string
      places:
        items:
          type: string
        type: array
      teacher:
        type: string
      times:
        items:
          $ref: '#/definitions/model.ClassTimeInfo'
        type: array
    type: object
  model.ClassTableInfo:
    properties:
      class_list:
        items:
          $ref: '#/definitions/model.ClassInfo'
        type: array
      class_num:
        type: integer
      table_id:
        type: integer
      table_name:
        type: string
    type: object
  model.ClassTimeInfo:
    properties:
      day:
        type: integer
      duration:
        type: integer
      start:
        type: integer
      week_state:
        description: 全周0,单周1,双周2
        type: integer
      weeks:
        type: string
    type: object
  model.CommentInfo:
    properties:
      content:
        type: string
      id:
        type: string
      is_anonymous:
        type: boolean
      is_like:
        type: boolean
      like_num:
        type: integer
      target_user_info:
        $ref: '#/definitions/model.UserInfoResponse'
        type: object
      time:
        type: integer
      user_info:
        $ref: '#/definitions/model.UserInfoResponse'
        type: object
    type: object
  model.CountModel:
    properties:
      count:
        type: integer
    type: object
  model.CourseInfo:
    properties:
      content:
        type: string
      course_name:
        type: string
      evaluation_id:
        type: integer
      parent_comment_id:
        type: string
      sid:
        type: string
      teacher:
        type: string
    type: object
  model.EvaluationInfo:
    properties:
      attendance_check_type:
        type: string
      comment_num:
        type: integer
      content:
        type: string
      course_id:
        type: string
      course_name:
        type: string
      exam_check_type:
        type: string
      id:
        type: integer
      is_anonymous:
        type: boolean
      is_like:
        type: boolean
      is_valid:
        type: boolean
      like_num:
        type: integer
      rate:
        type: number
      tags:
        items:
          type: string
        type: array
      teacher:
        type: string
      time:
        type: integer
      user_info:
        $ref: '#/definitions/model.UserInfoResponse'
        type: object
    type: object
  model.LoginModel:
    properties:
      password:
        type: string
      sid:
        type: string
    required:
    - password
    - sid
    type: object
  model.MessageSub:
    properties:
      course_info:
        $ref: '#/definitions/model.CourseInfo'
        type: object
      is_like:
        type: boolean
      is_read:
        type: boolean
      reply:
        type: string
      time:
        type: string
      user_info:
        $ref: '#/definitions/model.UserInfoRequest'
        type: object
    type: object
  model.ParentCommentInfo:
    properties:
      content:
        type: string
      id:
        description: 父评论id
        type: string
      is_anonymous:
        type: boolean
      is_like:
        type: boolean
      like_num:
        type: integer
      sub_comments_list:
        items:
          $ref: '#/definitions/model.CommentInfo'
        type: array
      sub_comments_num:
        type: integer
      time:
        type: integer
      user_info:
        $ref: '#/definitions/model.UserInfoResponse'
        type: object
    type: object
  model.TagModel:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  model.UserInfoRequest:
    properties:
      avatar:
        type: string
      username:
        type: string
    type: object
  model.UserInfoResponse:
    properties:
      avatar:
        type: string
      sid:
        type: string
      username:
        type: string
    type: object
  search.searchHistoryCourseResponse:
    properties:
      courses:
        items:
          $ref: '#/definitions/service.SearchHistoryCourseInfo'
        type: array
      length:
        type: integer
      page:
        type: integer
    type: object
  search.searchResponse:
    properties:
      courses:
        items:
          $ref: '#/definitions/service.SearchCourseInfo'
        type: array
      length:
        type: integer
      page:
        type: integer
    type: object
  service.SearchCourseInfo:
    properties:
      class_id:
        description: 课堂编号
        type: integer
      course_id:
        description: 课程编号
        type: string
      credit:
        description: 学分
        type: number
      id:
        description: 主键
        type: integer
      name:
        description: 课程名称
        type: string
      teacher:
        description: 任课教师姓名
        type: string
      type:
        description: 课程类型
        type: integer
    type: object
  service.SearchHistoryCourseInfo:
    properties:
      credit:
        description: 学分
        type: number
      hash:
        description: 教师名和课程hash成的唯一标识
        type: string
      id:
        description: 主键
        type: integer
      name:
        description: 课程名称
        type: string
      rate:
        description: 课程评价星级
        type: number
      stars_num:
        description: 参与评分人数
        type: integer
      teacher:
        description: 教师姓名
        type: string
      type:
        description: 课程类型，公共课为0，专业课为1
        type: integer
    type: object
  table.addClassResponseData:
    properties:
      class_info:
        $ref: '#/definitions/model.ClassInfo'
        type: object
      table_id:
        type: integer
    type: object
  table.getTablesResponse:
    properties:
      table_list:
        items:
          $ref: '#/definitions/model.ClassTableInfo'
        type: array
      table_num:
        type: integer
    type: object
  table.renameBodyData:
    properties:
      new_name:
        type: string
    type: object
  tag.tagGetResponse:
    properties:
      list:
        items:
          $ref: '#/definitions/model.TagModel'
        type: array
      sum:
        type: integer
    type: object
host: '...'
info:
  contact: {}
  description: 木犀课栈
  license: {}
  title: Muxi K-Stack
  version: "1.0"
paths:
  /comment/{id}/:
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 一级评论id
        in: path
        name: id
        required: true
        type: string
      - description: 评论回复的目标用户的sid，若是匿名用户，则为'0'
        in: query
        name: sid
        required: true
        type: string
      - description: data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/comment.newCommentRequest'
          type: object
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.CommentInfo'
      summary: 回复评论
      tags:
      - comment
  /comment/{id}/like/:
    put:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 点赞评论id
        in: path
        name: id
        required: true
        type: string
      - description: 当前点赞状态
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/comment.likeDataRequest'
          type: object
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/comment.likeDataResponse'
      summary: 评论点赞/取消点赞
      tags:
      - comment
  /course/{id}/evaluations/:
    get:
      parameters:
      - description: 游客登录则不需要此字段或为空
        in: header
        name: token
        type: string
      - description: 课程id
        in: path
        name: id
        required: true
        type: string
      - description: 热评数
        in: query
        name: hot_limit
        required: true
        type: integer
      - description: 评课数
        in: query
        name: limit
        required: true
        type: integer
      - description: 上一次请求的最后一个评课的id，若是初始请求则为0
        in: query
        name: last_id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/evaluation.evaluationsOfCourseResponse'
      summary: 课程所有评课和热评
      tags:
      - evaluation
  /evaluation/:
    get:
      parameters:
      - description: 游客登录则不需要此字段或为空
        in: header
        name: token
        type: string
      - description: 最大的一级评论数量
        in: query
        name: limit
        required: true
        type: integer
      - description: 上一次请求的最后一个评课的id，若是初始请求则为0
        in: query
        name: last_id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/evaluation.playgroundResponse'
      summary: 评课广场获取评课列表
      tags:
      - evaluation
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/evaluation.evaluationPublishRequest'
          type: object
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/evaluation.evaluationPublishResponse'
      summary: 发布评课
      tags:
      - evaluation
  /evaluation/{id}/:
    delete:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 评课id
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
      summary: 删除评课
      tags:
      - evaluation
    get:
      parameters:
      - description: 游客登录则不需要此字段或为空
        in: header
        name: token
        type: string
      - description: 评课id
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.EvaluationInfo'
      summary: 获取评课详情
      tags:
      - evaluation
  /evaluation/{id}/comment/:
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 评课id
        in: path
        name: id
        required: true
        type: string
      - description: data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/comment.newCommentRequest'
          type: object
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.ParentCommentInfo'
      summary: 评论评课
      tags:
      - comment
  /evaluation/{id}/comments/:
    get:
      parameters:
      - description: 游客登录则不需要此字段或为空
        in: header
        name: token
        type: string
      - description: 评课id
        in: path
        name: id
        required: true
        type: string
      - description: 最大的一级评论数量
        in: query
        name: limit
        required: true
        type: integer
      - description: 分页页码，默认为1
        in: query
        name: page
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/comment.commentListResponse'
      summary: 获取评论列表
      tags:
      - comment
  /evaluation/{id}/like/:
    put:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 点赞的评课id
        in: path
        name: id
        required: true
        type: string
      - description: 当前点赞状态
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/evaluation.likeDataRequest'
          type: object
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/evaluation.likeDataResponse'
      summary: 评论点赞/取消点赞
      tags:
      - evaluation
  /login:
    post:
      consumes:
      - application/json
      description: 用学号登录，返回token，如果isnew==1，就要post用户信息。
      parameters:
      - description: sid学号，password密码
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.LoginModel'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.AuthResponse'
      summary: 学号登录
      tags:
      - auth
  /message/:
    get:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页最大数
        in: query
        name: limit
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/message.messageListResponse'
      summary: 获取消息提醒
      tags:
      - message
  /message/count/:
    get:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.CountModel'
      summary: 获取消息提醒的个数
      tags:
      - message
  /message/readall/:
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      responses:
        "200":
          description: OK
      summary: 读取消息提醒
      tags:
      - message
  /search/course/:
    get:
      parameters:
      - description: 关键字
        in: query
        name: keyword
        required: true
        type: string
      - description: 是否为通核, 0或者不给表示不筛选
        in: query
        name: th
        type: string
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页最大数
        in: query
        name: limit
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/search.searchResponse'
      summary: 搜索课程接口
      tags:
      - search
  /search/historyCourse/:
    get:
      parameters:
      - description: 关键字
        in: query
        name: keyword
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页最大数
        in: query
        name: limit
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/search.searchHistoryCourseResponse'
      summary: 搜索历史课程接口
      tags:
      - search
  /table/:
    get:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/table.getTablesResponse'
      summary: 获取课表
      tags:
      - table
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 若是创建副本，则为课表副本id，若是添加新课表，则为0
        in: query
        name: id
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.ClassTableInfo'
      summary: 新建课表
      tags:
      - table
  /table/{id}/:
    delete:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 课表id
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
      summary: 删除课表
      tags:
      - table
  /table/{id}/class/:
    delete:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 课表id
        in: path
        name: id
        required: true
        type: string
      - description: 课堂id
        in: query
        name: classId
        required: true
        type: string
      responses:
        "200":
          description: OK
      summary: 删除课堂
      tags:
      - table
    post:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 课表id
        in: path
        name: id
        required: true
        type: string
      - description: 课堂id
        in: query
        name: classId
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/table.addClassResponseData'
      summary: 收藏的课堂加入课表
      tags:
      - table
  /table/{id}/rename/:
    put:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 课表id
        in: path
        name: id
        required: true
        type: string
      - description: data
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/table.renameBodyData'
          type: object
      responses:
        "200":
          description: OK
      summary: 课表重命名
      tags:
      - table
  /tag/:
    get:
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/tag.tagGetResponse'
      summary: 获取课程评价标签列表
      tags:
      - tag
  /upload/image:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 二进制图片文件
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: 上传文件，图片，返回url，即为上传头像
      tags:
      - upload
  /user/evaluations/:
    get:
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 评课数
        in: query
        name: limit
        required: true
        type: integer
      - description: 上一次请求的最后一个评课的id，若是初始请求则为0
        in: query
        name: last_id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/evaluation.historyEvaluationsResponse'
      summary: 个人历史评课
      tags:
      - evaluation
  /user/info:
    get:
      consumes:
      - application/json
      description: 带着token
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.UserInfoResponse'
      summary: 获取用户信息
      tags:
      - user
    post:
      consumes:
      - application/json
      description: 带着token，上传用户的头像/avatar，名字/username.
      parameters:
      - description: token
        in: header
        name: token
        required: true
        type: string
      - description: 用户信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UserInfoRequest'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: 上传用户信息
      tags:
      - user
schemes:
- https
swagger: "2.0"
tags:
- description: 用户相关
  name: user
- description: 消息提醒
  name: message
- description: 课程相关
  name: course
- description: 评课
  name: evaluation
- description: 评论
  name: comment
- description: 排课课表
  name: table
- description: 举报
  name: report
- description: 课程评价标签
  name: tag
